package main

import (
	"fmt"
	"regexp"
)

func main() {
	numeros := []string {
		"+55 (81) 99164-3161", "81985640864", "4677891", "081982561207",
		"74981579190", "81984006263", "87998091702", "81981310086",
		"87988627598", "81995657754", "74988535068", "81982078764",
		"16993791174", "81973045293", "81983259890", "87996386158",
		"81991018956", "87981513568", "81986449905", "81987023343",
		"74981005646", "81997189784", "81985288113", "87981254697",
		"81994653887", "69981125334", "81999175736", "87988687327",
		"81992514103", "81997042423", "81988093836", "81993960736",
		"81986215234", "74981314683", "81988712312363567", "87988617477",
		"8788268188", "87981068187", "87981095761", "81989008470",
		"87981094286", "81993910324", "81996466225", "87981586252",
		"87988722951", "8198422222718885", "81999021277", "87988533751",
		"87996546369", "89994022655", "81995757814", "81973367480",
		"81999975498", "81991683890", "81995156273", "8199843423461202",
		"81997997836", "87996110341", "81985755749", "81985564626",
		"81997564166", "04452", "81994791231236275", "87991380238",
		"81992788503", "81997211665", "81992777611", "81999312635",
		"43998331820", "81991801047", "993987049", "87991139996",
		"87991144157", "81991351552", "87991273142", "81994206204",
		"11956916246", "81992393867", "81991140655", "81992143946",
		"81985194878", "87996831781", "81999109433", "87988087814",
		"81991446600", "87981099359", "81986092218", "81986383656",
		"81983140238", "81984564466", "81982551435", "81992267721",
		"81997077375", "81994479648", "87991417314", "81986431108",
		"81998990277", "81988136548", "81979054072", "81973322875",
		"+55 (11) 91234-5678", "11987654321", "1191234567", "11 98765-4321",
		"119876543210", "1198765432", "(11)987654321", "11 91234 5678",
		"11912345678", "+55 21 98741212465-4321", "21987654321", "21 987654321",
		"(21)98765-4321", "21987651241443210", "21 91234-5678", "+55 (31) 98765-4321",
		"31987654321", "31 987651424321", "(31)98765-4321", "319876543210",
		"31 91234-5678", "+555-4321", "41987654321", "41 987654321",
		"(41)98765-4321", "419876123543210", "41 91234-5678", "+55 (51) 98765-4321",
		"51987654321", "51 987654321", "(51)98765-4321", "51987654321110",
		"51 91234-5678", "+55 61 98765-4321", "61987654321", "61 9876112354321",
		"(61)98765-4321", "619876543210", "61 91234-5678", "+55 (71) 98764325-4321",
		"71987654321", "71 987654321", "(71)98765-4321", "719876543210",
		"71 91234-5678", "+55 (85) 98765-4321", "85987654321", "85 987654231231321",
		"(85)98765-4321", "85987aasd6543210", "85 91234-5678", "+55 (27) 98765-4321",
		"27987654321", "27 987654321", "(27)98765-4321", "279876543210",
		"27 91234-5678", "+55 (47) 98765-4321", "47987654321", "47 987654321",
		"(47)98765-4321", "479876543210", "47 91234-5678", "+55 (79) 98765-4321",
		"79987654321", "79 987654321", "(79)98765-4321", "799876543210",
		"79 91234-5678", "+55 34 98765-4321", "34987654321", "34 987654321",
		"(34)98765-4321", "349876543210", "34 91234-5678", "+55 67 98765-4321",
		"67987654321", "67 987654321", "(67)98765-4321", "679876543210",
		"67 91234-5678", "+55 (91) 98765-4321", "91987654321", "91 987654321",
		"(91)98765-4321", "919876543210", "91 91234-5678", "+55 (96) 98765-4321",
		"96987654321", "96 987654321", "(96)98765-4321", "969876543210",
		"96 91234-5678", "1234567", "9876543", "8765432", "7654321", "6543210",
		"5432109", "4321098", "3210987", "2109876", "1098765",
		"99887766", "88776655", "77665544", "66554433", "55443322",
		"44332211", "33221100", "22110099", "11009988", "00998877",
		"81987654321", "819876543210", "8198765432", "819876543", "81987654",
		"8198765", "819876", "81987", "8198", "81-987654321", "81 987654321",
		"(81)987654321", "+55 81 987654321", "81 0987654321", "81 98765-4321",
		"81 9876543", "81 98765432", "81 9876543210", "81 987",
		"81 98765",
	}

	id := 1

	for _, numero := range numeros {
		limpo := clearNumber(numero)

		if len(limpo) <= 7 || len(limpo) == 12{
			continue
		}

		limpo, err := formatPhone((numero))

		if err != nil {
			continue
		}
		
		fmt.Printf("(%d) - %s \n", id, limpo)
		id = id + 1
	}

}

func clearNumber(s string) string {
	re := regexp.MustCompile(`\D`)
	return re.ReplaceAllString(s, "")
}

func formatPhone(number string) (string, error) {
	numbers := clearNumber(number)

	if len(numbers) == 13 {
		numbers = numbers[2:]
		return fmt.Sprintf("(%s) %s-%s", numbers[0:2], numbers[2:7], numbers[7:]), nil
	} else if len(numbers) == 11 {
		return fmt.Sprintf("(%s) %s-%s", numbers[0:2], numbers[2:7], numbers[7:]), nil
	} else if len(numbers) == 10 {
		numbers = numbers[:2] + "9" + numbers[2:]
		return fmt.Sprintf("(%s) %s-%s", numbers[0:2], numbers[2:7], numbers[7:]), nil
	} else if len(numbers) == 9 {
		numbers = "81" + numbers
		return fmt.Sprintf("(%s) %s-%s", numbers[0:2], numbers[2:7], numbers[7:]), nil
	} else if len(numbers) == 8 {
		numbers = "819" + numbers
		return fmt.Sprintf("(%s) %s-%s", numbers[0:2], numbers[2:7], numbers[7:]), nil
	}

	return "", fmt.Errorf("número inválido, tem %d dígitos", len(numbers))
}